<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—Ç–µ—Ä—ã - –ñ–ö –ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã - –°–ö –ù–í–ú</title>
    <meta name="description" content="–í—ã–±–µ—Ä–∏—Ç–µ –ª–∏—Ç–µ—Ä –≤ –ñ–ö –ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã. 18 –ª–∏—Ç–µ—Ä–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞–º–∏." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="narodnye-kvartaly">
    <!-- Header -->
    <header class="site-header">
        <div class="header-inner">
            <div class="logo">
                <span class="logo-text">–°–ö –ù–í–ú</span>
            </div>
            <button class="nav-toggle" onclick="toggleNav()" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                <span class="nav-toggle-bar"></span>
            </button>
            <nav class="nav" id="nav">
                <a href="index.html#projects" class="nav-link">–ü—Ä–æ–µ–∫—Ç—ã</a>
                <a href="index.html#mortgage" class="nav-link">–ò–ø–æ—Ç–µ–∫–∞</a>
                <a href="index.html#promos" class="nav-link">–ê–∫—Ü–∏–∏</a>
            </nav>
            <div class="header-actions">
                <a href="tel:+78612112850" class="phone">+7(988)470-78-93</a>
                <button class="btn btn-primary" onclick="openModal('consultation')">–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</button>
            </div>
        </div>
    </header>

    <!-- Apartments Hero -->
    <section class="apartments-hero">
        <div class="container">
            <div class="breadcrumbs">
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a> / <a href="index.html#projects">–ü—Ä–æ–µ–∫—Ç—ã</a> / <a href="narodnye-kvartaly.html">–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã</a> / <span>–õ–∏—Ç–µ—Ä—ã</span>
            </div>
            <h1>–ñ–∏–ª–æ–π –∫–æ–º–ø–ª–µ–∫—Å ¬´–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã¬ª</h1>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="container">
            <div class="filter-tabs">
                <button class="filter-tab" onclick="toggleFilterDropdown('type', this)">
                    –¢–∏–ø <span class="dropdown-arrow">‚åÑ</span>
                </button>
                <button class="filter-tab" onclick="toggleFilterDropdown('rooms', this)">
                    –ö–æ–º–Ω–∞—Ç <span class="dropdown-arrow">‚åÑ</span>
                </button>
                <button class="filter-tab" onclick="toggleFilterDropdown('price', this)">
                    –¶–µ–Ω–∞ <span class="dropdown-arrow">‚åÑ</span>
                </button>
                <button class="filter-tab" onclick="toggleFilterDropdown('area', this)">
                    –ü–ª–æ—â–∞–¥—å <span class="dropdown-arrow">‚åÑ</span>
                </button>
                <button class="clear-filters-btn" onclick="clearFilters()">
                    <span class="clear-icon">√ó</span>
                    –°–±—Ä–æ—Å–∏—Ç—å
                </button>
            </div>

            <!-- Type Dropdown -->
            <div class="filter-dropdown" id="type-dropdown">
                <div class="dropdown-content">
                    <div class="filter-section-title">–ñ–∏–ª–æ–µ</div>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="radio" name="type" value="apartment" checked>
                            <span>–ö–≤–∞—Ä—Ç–∏—Ä–∞</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="type" value="apartments">
                            <span>–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã</span>
                        </label>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Rooms Dropdown -->
            <div class="filter-dropdown" id="rooms-dropdown">
                <div class="dropdown-content">
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="checkbox" name="rooms" value="studio">
                            <span>–°—Ç—É–¥–∏—è</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" name="rooms" value="1">
                            <span>1</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" name="rooms" value="2">
                            <span>2</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" name="rooms" value="3">
                            <span>3</span>
                        </label>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Price Dropdown -->
            <div class="filter-dropdown" id="price-dropdown">
                <div class="dropdown-content">
                    <div class="price-type-tabs">
                        <button class="price-tab active" onclick="selectPriceType('total')">–ó–∞ –ø–æ–º–µ—â–µ–Ω–∏–µ</button>
                        <button class="price-tab" onclick="selectPriceType('perM2')">–ó–∞ –º¬≤</button>
                    </div>
                    <div class="price-range">
                        <input type="number" id="priceFrom" placeholder="–û–¢" min="0" step="1000">
                        <input type="number" id="priceTo" placeholder="–î–û" min="0" step="1000">
                        <span class="price-unit">‚ÇΩ</span>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Area Dropdown -->
            <div class="filter-dropdown" id="area-dropdown">
                <div class="dropdown-content">
                    <div class="area-type-tabs">
                        <button class="area-tab active" onclick="selectAreaType('total')">–û–±—â–∞—è</button>
                        <button class="area-tab" onclick="selectAreaType('living')">–ñ–∏–ª–∞—è</button>
                    </div>
                    <div class="area-range">
                        <input type="number" id="areaFrom" placeholder="–û–¢" min="0" step="0.1">
                        <input type="number" id="areaTo" placeholder="–î–û" min="0" step="0.1">
                        <span class="area-unit">M¬≤</span>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Apartments Section -->
    <section class="apartments-section">
        <div class="container">
            <div class="filter-results">
                <span id="resultsCount">–ù–∞–π–¥–µ–Ω–æ –∫–≤–∞—Ä—Ç–∏—Ä: 0</span>
            </div>
            <div class="apartments-grid" id="apartmentsGrid">
                <!-- –õ–∏—Ç–µ—Ä 1 -->
                <a href="narodnye-kvartaly-liter-1.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="studio" 
                   data-price-total="0" 
                   data-price-per-m2="0" 
                   data-area-total="28.0" 
                   data-area-living="28.0">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/detsk-ploshadki.png" alt="–õ–∏—Ç–µ—Ä 1">
                        <div class="apartment-badges">
                            <span class="badge floors">9 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 1</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2027</p>
                        <div class="apartment-details">
                            <span class="apartments-link">26 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 2 -->
                <a href="narodnye-kvartaly-liter-2.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="1" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="40" 
                   data-area-living="30">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/perspectiva.png" alt="–õ–∏—Ç–µ—Ä 2">
                        <div class="apartment-badges">
                            <span class="badge floors">9 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 2</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2027</p>
                        <div class="apartment-details">
                            <span class="apartments-link">23 –∫–≤–∞—Ä—Ç–∏—Ä—ã</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 3 -->
                <a href="narodnye-kvartaly-liter-3.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="2" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="55" 
                   data-area-living="42">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/blagoustroystvo.png" alt="–õ–∏—Ç–µ—Ä 3">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 3</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2027</p>
                        <div class="apartment-details">
                            <span class="apartments-link">6 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 4 -->
                <a href="narodnye-kvartaly-liter-4.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="3" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="65" 
                   data-area-living="50">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/uslugi.png" alt="–õ–∏—Ç–µ—Ä 4">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 4</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2027</p>
                        <div class="apartment-details">
                            <span class="apartments-link">5 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 6 -->
                <a href="narodnye-kvartaly-liter-6.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="studio" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="25" 
                   data-area-living="20">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/restorany.png" alt="–õ–∏—Ç–µ—Ä 6">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 6</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2026</p>
                        <div class="apartment-details">
                            <span class="apartments-link">66 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 7 -->
                <a href="narodnye-kvartaly-liter-7.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="1" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="38" 
                   data-area-living="28">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/detsk-ploshadki.png" alt="–õ–∏—Ç–µ—Ä 7">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 7</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2026</p>
                        <div class="apartment-details">
                            <span class="apartments-link">45 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 9 -->
                <a href="narodnye-kvartaly-liter-9.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="2" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="50" 
                   data-area-living="38">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/perspectiva.png" alt="–õ–∏—Ç–µ—Ä 9">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 9</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">38 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 10 -->
                <a href="narodnye-kvartaly-liter-10.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="3" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="70" 
                   data-area-living="55">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/blagoustroystvo.png" alt="–õ–∏—Ç–µ—Ä 10">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 10</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">42 –∫–≤–∞—Ä—Ç–∏—Ä—ã</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 12 -->
                <a href="narodnye-kvartaly-liter-12.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="studio" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="28" 
                   data-area-living="22">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/uslugi.png" alt="–õ–∏—Ç–µ—Ä 12">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 12</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">II –∫–≤. 2027</p>
                        <div class="apartment-details">
                            <span class="apartments-link">31 –∫–≤–∞—Ä—Ç–∏—Ä–∞</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 13 -->
                <a href="narodnye-kvartaly-liter-13.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="1" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="42" 
                   data-area-living="32">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/restorany.png" alt="–õ–∏—Ç–µ—Ä 13">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 13</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">29 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 15 -->
                <a href="narodnye-kvartaly-liter-15.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="2" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="52" 
                   data-area-living="40">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/detsk-ploshadki.png" alt="–õ–∏—Ç–µ—Ä 15">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 15</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">35 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 16 -->
                <a href="narodnye-kvartaly-liter-16.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="3" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="68" 
                   data-area-living="52">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/perspectiva.png" alt="–õ–∏—Ç–µ—Ä 16">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 16</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">33 –∫–≤–∞—Ä—Ç–∏—Ä—ã</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 22 -->
                <a href="narodnye-kvartaly-liter-22.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="studio" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="30" 
                   data-area-living="24">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/blagoustroystvo.png" alt="–õ–∏—Ç–µ—Ä 22">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 22</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">27 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 23 -->
                <a href="narodnye-kvartaly-liter-23.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="1" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="45" 
                   data-area-living="35">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/uslugi.png" alt="–õ–∏—Ç–µ—Ä 23">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 23</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">41 –∫–≤–∞—Ä—Ç–∏—Ä–∞</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 24 -->
                <a href="narodnye-kvartaly-liter-24.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="2" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="58" 
                   data-area-living="44">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/restorany.png" alt="–õ–∏—Ç–µ—Ä 24">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 24</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">39 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 26 -->
                <a href="narodnye-kvartaly-liter-26.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="3" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="72" 
                   data-area-living="56">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/detsk-ploshadki.png" alt="–õ–∏—Ç–µ—Ä 26">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 26</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">37 –∫–≤–∞—Ä—Ç–∏—Ä</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 27 -->
                <a href="narodnye-kvartaly-liter-27.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="studio" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="32" 
                   data-area-living="26">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/perspectiva.png" alt="–õ–∏—Ç–µ—Ä 27">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 27</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">43 –∫–≤–∞—Ä—Ç–∏—Ä—ã</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- –õ–∏—Ç–µ—Ä 28 -->
                <a href="narodnye-kvartaly-liter-28.html" class="apartment-card" 
                   data-type="apartment" 
                   data-rooms="1" 
                   data-price-total="0" 
                   data-price-per-m2="0"
                   data-area-total="48" 
                   data-area-living="36">
                    <div class="apartment-image">
                        <img src="src/img/narodnye-kvartaly/blagoustroystvo.png" alt="–õ–∏—Ç–µ—Ä 28">
                        <div class="apartment-badges">
                            <span class="badge floors">18 —ç—Ç–∞–∂–µ–π</span>
                            <span class="badge finish">–û—Ç–¥–µ–ª–∫–∞: –ø—Ä–µ–¥—á–∏—Å—Ç–æ–≤–∞—è</span>
                        </div>
                        <div class="renovation-banner">–†–µ–º–æ–Ω—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫ üéÅ</div>
                    </div>
                    <div class="apartment-info">
                        <h3>"–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã"</h3>
                        <h4>–õ–∏—Ç–µ—Ä 28</h4>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <p class="completion">III –∫–≤. 2028</p>
                        <div class="apartment-details">
                            <span class="apartments-link">34 –∫–≤–∞—Ä—Ç–∏—Ä—ã</span>
                            <div class="pricing">
                                <span class="total-price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div id="modal" class="modal-backdrop" style="display: none;" onclick="closeModal()">
        <div class="modal-dialog" onclick="event.stopPropagation()">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script>
        // Telegram config
        const TG_BOT_TOKEN = (window && window.TELEGRAM_BOT_TOKEN) ? window.TELEGRAM_BOT_TOKEN : '8026350498:AAGcyKMsrJyD0mGgj26Ss2m49vX5jp8LzaM';
        const TG_CHAT_ID = (window && window.TELEGRAM_CHAT_ID) ? window.TELEGRAM_CHAT_ID : '919481169';

        // Include all the JavaScript functions from the main page
        function openModal(modalId) {
            console.log('openModal called with:', modalId);
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            
            if (!modal || !modalBody) {
                console.error('Modal elements not found');
                return;
            }
            
            const content = {
                'consultation': `
                    <h3>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h3>
                    <form onsubmit="handleConsultationSubmit(event)">
                        <div class="form-group">
                            <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="+7(___)___-__-__" required>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="privacy-modal" required>
                            <label for="privacy-modal">–Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞</label>
                        </div>
                        <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                    </form>
                `
            };
            
            modalBody.innerHTML = content[modalId] || '<p>–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ</p>';
            modal.style.display = 'flex';
            
            // Initialize phone masks for dynamically created content
            initPhoneMasks();
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function handleConsultationSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const privacyCheckbox = event.target.querySelector('input[type="checkbox"]');
            const name = formData.get('name');
            const phone = formData.get('phone');
            
            // Check privacy checkbox
            if (!privacyCheckbox || !privacyCheckbox.checked) {
                showToast('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', 'error');
                return;
            }

            // Validate name - only letters, minimum 2 characters
            const nameRegex = /^[a-zA-Z–∞-—è–ê-–Ø—ë–Å\s\-']+$/;
            if (!nameRegex.test(name.trim())) {
                showToast('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã', 'error');
                return;
            }

            if (name.trim().length < 2) {
                showToast('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞', 'error');
                return;
            }

            // Validate phone - exactly 11 digits
            const phoneRegex = /^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/;
            if (!phoneRegex.test(phone)) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7(999)999-99-99', 'error');
                return;
            }
            
            const message = `üè† –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é

üë§ –ò–º—è: ${name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}
üìç –ü—Ä–æ–µ–∫—Ç: –ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã`;

            sendToTelegram(message);
            closeModal();
            showToast('–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.', 'success');
        }

        function sendToTelegram(message) {
            const botToken = TG_BOT_TOKEN;
            const chatId = TG_CHAT_ID;
            
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const data = {
                chat_id: chatId,
                text: message,
                parse_mode: 'HTML'
            };
            
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Telegram response:', data);
            })
            .catch(error => {
                console.error('Error sending to Telegram:', error);
            });
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<div class="toast-content">${message}</div><button class="toast-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>`;
            document.body.appendChild(toast);

            // Eye-level positioning (~20vh from top), centered and above all overlays
            Object.assign(toast.style, {
                position: 'fixed',
                top: '20vh',
                left: '50%',
                transform: 'translateX(-50%)',
                zIndex: '9999',
                maxWidth: '90vw'
            });
            
            const removeToast = () => {
                if (toast && toast.parentNode) toast.parentNode.removeChild(toast);
            };
            
            toast.querySelector('.toast-close')?.addEventListener('click', removeToast);
            
            setTimeout(removeToast, 4000);
        }

        function toggleNav() {
            const nav = document.getElementById('nav');
            nav.classList.toggle('show');
        }

        // Filter functionality
        let allApartments = [];
        let currentPriceType = 'total';
        let currentAreaType = 'total';

        // Initialize filter system
        function initFilter() {
            allApartments = Array.from(document.querySelectorAll('.apartment-card'));
            updateResultsCount(allApartments.length);
            
            // Hide all dropdowns initially
            document.querySelectorAll('.filter-dropdown').forEach(dropdown => {
                dropdown.style.display = 'none';
            });
            
            // Add event listeners for automatic filtering
            addFilterEventListeners();
        }

        // Add event listeners for automatic filtering
        function addFilterEventListeners() {
            // Listen for changes in radio buttons (type)
            document.querySelectorAll('input[name="type"]').forEach(radio => {
                radio.addEventListener('change', updateFilterResults);
            });
            
            // Listen for changes in checkboxes (rooms)
            document.querySelectorAll('input[name="rooms"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateFilterResults);
            });
            
            // Listen for changes in price inputs
            document.getElementById('priceFrom').addEventListener('input', updateFilterResults);
            document.getElementById('priceTo').addEventListener('input', updateFilterResults);
            
            // Listen for changes in area inputs
            document.getElementById('areaFrom').addEventListener('input', updateFilterResults);
            document.getElementById('areaTo').addEventListener('input', updateFilterResults);
            
            // Listen for clicks outside filter dropdowns
            document.addEventListener('click', function(event) {
                const filterSection = document.querySelector('.filter-section');
                if (!filterSection.contains(event.target)) {
                    closeAllDropdowns();
                }
            });
        }

        // Close all filter dropdowns
        function closeAllDropdowns() {
            document.querySelectorAll('.filter-dropdown').forEach(dropdown => {
                dropdown.style.display = 'none';
            });
            
            // Reset all arrows
            document.querySelectorAll('.dropdown-arrow').forEach(arrow => {
                arrow.textContent = '‚åÑ';
            });
        }

        // Toggle filter dropdown
        function toggleFilterDropdown(filterType, button) {
            const dropdown = document.getElementById(filterType + '-dropdown');
            const arrow = button.querySelector('.dropdown-arrow');
            
            // Close all other dropdowns
            document.querySelectorAll('.filter-dropdown').forEach(d => {
                if (d !== dropdown) {
                    d.style.display = 'none';
                }
            });
            
            // Reset all arrows
            document.querySelectorAll('.dropdown-arrow').forEach(arr => {
                arr.textContent = '‚åÑ';
            });
            
            // Toggle current dropdown
            if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                dropdown.style.display = 'block';
                
                // Position dropdown under the button
                const buttonRect = button.getBoundingClientRect();
                const filterSection = document.querySelector('.filter-section');
                const sectionRect = filterSection.getBoundingClientRect();
                
                dropdown.style.position = 'absolute';
                dropdown.style.left = (buttonRect.left - sectionRect.left) + 'px';
                dropdown.style.top = (buttonRect.bottom - sectionRect.top + 4) + 'px';
                
                arrow.textContent = '‚åÉ';
            } else {
                dropdown.style.display = 'none';
                arrow.textContent = '‚åÑ';
            }
        }

        // Select price type
        function selectPriceType(type) {
            currentPriceType = type;
            document.querySelectorAll('.price-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Apply filters automatically
            updateFilterResults();
        }

        // Select area type
        function selectAreaType(type) {
            currentAreaType = type;
            document.querySelectorAll('.area-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Apply filters automatically
            updateFilterResults();
        }

        // Update filter results without closing dropdowns
        function updateFilterResults() {
            const selectedType = document.querySelector('input[name="type"]:checked').value;
            const selectedRooms = Array.from(document.querySelectorAll('input[name="rooms"]:checked')).map(cb => cb.value);
            const priceType = currentPriceType;
            const areaType = currentAreaType;
            
            const priceFrom = document.getElementById('priceFrom').value ? parseFloat(document.getElementById('priceFrom').value) : null;
            const priceTo = document.getElementById('priceTo').value ? parseFloat(document.getElementById('priceTo').value) : null;
            const areaFrom = document.getElementById('areaFrom').value ? parseFloat(document.getElementById('areaFrom').value) : null;
            const areaTo = document.getElementById('areaTo').value ? parseFloat(document.getElementById('areaTo').value) : null;

            const filteredApartments = allApartments.filter(apartment => {
                // Type filter
                if (apartment.dataset.type !== selectedType) {
                    return false;
                }

                // Rooms filter
                if (selectedRooms.length > 0 && !selectedRooms.includes(apartment.dataset.rooms)) {
                    return false;
                }

                // Price filter (skip if price is 0 - "–ø–æ –∑–∞–ø—Ä–æ—Å—É")
                const priceValue = priceType === 'total' 
                    ? parseFloat(apartment.dataset.priceTotal) 
                    : parseFloat(apartment.dataset.pricePerM2);
                
                if (priceValue > 0) {
                    if (priceFrom !== null && priceValue < priceFrom) {
                        return false;
                    }
                    if (priceTo !== null && priceValue > priceTo) {
                        return false;
                    }
                }

                // Area filter
                const areaValue = areaType === 'total' 
                    ? parseFloat(apartment.dataset.areaTotal) 
                    : parseFloat(apartment.dataset.areaLiving);
                
                if (areaFrom !== null && areaValue < areaFrom) {
                    return false;
                }
                if (areaTo !== null && areaValue > areaTo) {
                    return false;
                }

                return true;
            });

            // Hide all apartments
            allApartments.forEach(apartment => {
                apartment.style.display = 'none';
            });

            // Show filtered apartments
            filteredApartments.forEach(apartment => {
                apartment.style.display = 'block';
            });

            updateResultsCount(filteredApartments.length);
        }

        // Apply filters and close dropdowns (called by "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" button)
        function applyFilters() {
            updateFilterResults();
            closeAllDropdowns();
        }

        // Clear filters
        function clearFilters() {
            // Reset type to apartment
            document.querySelector('input[name="type"][value="apartment"]').checked = true;
            
            // Uncheck all rooms
            document.querySelectorAll('input[name="rooms"]').forEach(cb => cb.checked = false);
            
            // Reset price type to total
            currentPriceType = 'total';
            document.querySelectorAll('.price-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector('.price-tab').classList.add('active');
            
            // Reset area type to total
            currentAreaType = 'total';
            document.querySelectorAll('.area-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector('.area-tab').classList.add('active');
            
            // Clear price inputs
            document.getElementById('priceFrom').value = '';
            document.getElementById('priceTo').value = '';
            
            // Clear area inputs
            document.getElementById('areaFrom').value = '';
            document.getElementById('areaTo').value = '';
            
            // Close all dropdowns
            document.querySelectorAll('.filter-dropdown').forEach(dropdown => {
                dropdown.style.display = 'none';
            });
            
            // Reset arrows
            document.querySelectorAll('.dropdown-arrow').forEach(arrow => {
                arrow.textContent = '‚åÑ';
            });
            
            // Show all apartments
            allApartments.forEach(apartment => {
                apartment.style.display = 'block';
            });
            
            updateResultsCount(allApartments.length);
        }

        // Update results count
        function updateResultsCount(count) {
            document.getElementById('resultsCount').textContent = `–ù–∞–π–¥–µ–Ω–æ –∫–≤–∞—Ä—Ç–∏—Ä: ${count}`;
        }

        // Phone mask functions
        function formatPhoneNumber(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length === 0) {
                input.value = '';
                return;
            }
            
            if (value[0] === '7') {
                value = value.substring(1);
            } else if (value[0] === '8') {
                value = value.substring(1);
            }
            
            if (value.length > 10) {
                value = value.substring(0, 10);
            }
            
            let formattedValue = '+7';
            if (value.length > 0) {
                formattedValue += '(' + value.substring(0, 3);
            }
            if (value.length >= 4) {
                formattedValue += ')' + value.substring(3, 6);
            }
            if (value.length >= 7) {
                formattedValue += '-' + value.substring(6, 8);
            }
            if (value.length >= 9) {
                formattedValue += '-' + value.substring(8, 10);
            }
            
            input.value = formattedValue;
        }

        function formatPhoneValue(value) {
            let digits = value.replace(/\D/g, '');
            if (digits.length === 0) return '';
            
            if (digits[0] === '7') {
                digits = digits.substring(1);
            } else if (digits[0] === '8') {
                digits = digits.substring(1);
            }
            
            if (digits.length > 10) {
                digits = digits.substring(0, 10);
            }
            
            let formatted = '+7';
            if (digits.length > 0) {
                formatted += '(' + digits.substring(0, 3);
            }
            if (digits.length >= 4) {
                formatted += ')' + digits.substring(3, 6);
            }
            if (digits.length >= 7) {
                formatted += '-' + digits.substring(6, 8);
            }
            if (digits.length >= 9) {
                formatted += '-' + digits.substring(8, 10);
            }
            
            return formatted;
        }

        function handlePhoneKeydown(event) {
            const input = event.target;
            const key = event.key;
            
            // Allow: backspace, delete, tab, escape, enter
            if ([8, 9, 27, 13, 46].indexOf(event.keyCode) !== -1 ||
                // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                (event.keyCode === 65 && event.ctrlKey === true) ||
                (event.keyCode === 67 && event.ctrlKey === true) ||
                (event.keyCode === 86 && event.ctrlKey === true) ||
                (event.keyCode === 88 && event.ctrlKey === true)) {
                return;
            }
            
            // Ensure that it is a number and stop the keypress
            if ((event.shiftKey || (event.keyCode < 48 || event.keyCode > 57)) && (event.keyCode < 96 || event.keyCode > 105)) {
                event.preventDefault();
            }
        }

        function formatNameInput(input) {
            let value = input.value;
            // Remove numbers and special characters, keep only letters, spaces, hyphens, and apostrophes
            value = value.replace(/[^a-zA-Z–∞-—è–ê-–Ø—ë–Å\s\-']/g, '');
            input.value = value;
        }

        function handleNameKeydown(event) {
            const key = event.key;
            // Allow: backspace, delete, tab, escape, enter, space, hyphen, apostrophe
            if ([8, 9, 27, 13, 32, 45, 39].indexOf(event.keyCode) !== -1 ||
                // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                (event.keyCode === 65 && event.ctrlKey === true) ||
                (event.keyCode === 67 && event.ctrlKey === true) ||
                (event.keyCode === 86 && event.ctrlKey === true) ||
                (event.keyCode === 88 && event.ctrlKey === true)) {
                return;
            }
            
            // Allow letters (A-Z, a-z, –∞-—è, –ê-–Ø, —ë, –Å)
            if ((event.keyCode >= 65 && event.keyCode <= 90) ||
                (event.keyCode >= 97 && event.keyCode <= 122) ||
                (event.keyCode >= 1040 && event.keyCode <= 1103) ||
                event.keyCode === 1105 || event.keyCode === 1025) {
                return;
            }
            
            event.preventDefault();
        }

        function initPhoneMasks() {
            const phoneInputs = document.querySelectorAll('input[type="tel"]');
            phoneInputs.forEach(input => {
                input.addEventListener('input', function() {
                    formatPhoneNumber(this);
                });
                input.addEventListener('keydown', handlePhoneKeydown);
                input.addEventListener('paste', function(e) {
                    setTimeout(() => {
                        formatPhoneNumber(this);
                    }, 10);
                });
            });

            const nameInputs = document.querySelectorAll('input[type="text"][name="name"]');
            nameInputs.forEach(input => {
                input.addEventListener('input', function() {
                    formatNameInput(this);
                });
                input.addEventListener('keydown', handleNameKeydown);
                input.addEventListener('paste', function(e) {
                    setTimeout(() => {
                        formatNameInput(this);
                    }, 10);
                });
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            initFilter();
            initPhoneMasks();
        });
    </script>
</body>
</html>
