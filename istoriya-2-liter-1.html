<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Литер 1 - ЖК История 2 - СК НВМ</title>
    <meta name="description" content="Варианты квартир в Литере 1 ЖК История 2. Студии, 1-комнатные, 2-комнатные и 3-комнатные квартиры." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="istoriya-2">
    <!-- Header -->
    <header class="site-header">
        <div class="header-inner">
            <div class="logo">
                <span class="logo-text">СК НВМ</span>
            </div>
            <button class="nav-toggle" onclick="toggleNav()" aria-label="Открыть меню">
                <span class="nav-toggle-bar"></span>
            </button>
            <nav class="nav" id="nav">
                <a href="index.html#projects" class="nav-link">Проекты</a>
                <a href="index.html#mortgage" class="nav-link">Ипотека</a>
                <a href="index.html#promos" class="nav-link">Акции</a>
            </nav>
            <div class="header-actions">
                <a href="tel:+78612112850" class="phone">+7(988)470-78-93</a>
                <button class="btn btn-primary" onclick="openModal('consultation')">Обратный звонок</button>
            </div>
        </div>
    </header>

    <!-- Floor Plans Hero -->
    <section class="floor-plans-hero">
        <div class="container">
            <div class="breadcrumbs">
                <a href="index.html">Главная</a> / <a href="index.html#projects">Проекты</a> / <a href="istoriya-2.html">История 2</a> / <a href="istoriya-2-apartments.html">Литеры</a> / <span>Литер 1</span>
            </div>
            <h1>Литер 1</h1>
            <p class="hero-subtitle">Краснодар, пос. Южный</p>
        </div>
    </section>

    <!-- Floor Plans Section -->
    <section class="floor-plans-section">
        <div class="container">
            <div class="floor-plans-grid">
                <!-- 1-комнатная -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>Литер 1</h3>
                        <p class="location">Краснодар, пос. Южный</p>
                        <span class="room-badge">1к</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/варианты планировок/1к.png" alt="1-комнатная">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">39,0</span>
                                <span class="area-value">46,0</span>
                                <span class="area-value">65,3</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">от 4,6 млн ₽</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(8, 39.0, '39.0,46.0,65.3')">8 помещений</button>
                    </div>
                </div>

                <!-- 2-комнатная -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>Литер 1</h3>
                        <p class="location">Краснодар, пос. Южный</p>
                        <span class="room-badge">2к</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/варианты планировок/2к.png" alt="2-комнатная">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">65,3</span>
                                <span class="area-value">72,1</span>
                                <span class="area-value">78,5</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">от 7,3 млн ₽</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(12, 65.3, '65.3,72.1,78.5')">12 помещений</button>
                    </div>
                </div>

                <!-- 3-комнатная -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>Литер 1</h3>
                        <p class="location">Краснодар, пос. Южный</p>
                        <span class="room-badge">3к</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/варианты планировок/3к.png" alt="3-комнатная">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">78,5</span>
                                <span class="area-value">85,2</span>
                                <span class="area-value">92,1</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">от 8,9 млн ₽</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(4, 78.5, '78.5,85.2,92.1')">4 помещения</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Apartments Detail Panel -->
    <div id="apartments-panel" class="apartments-panel" style="display: none;">
        <div class="panel-header">
            <div class="panel-title">
                <h3>История 2</h3>
                <p>Литер 1 - Дома сданы</p>
            </div>
            <button class="panel-close" onclick="closeApartmentsPanel()">&times;</button>
        </div>
        <div class="panel-content">
            <div class="panel-floor-plan">
                <img src="src/img/варианты планировок/1к.png" alt="Планировка">
            </div>
            <div class="panel-summary">
                <p class="room-info">Помещение: <span id="panel-area">39.0</span> м²</p>
                <p class="found-info">Найдено: <span id="panel-count">8</span> помещений</p>
            </div>
            <div class="apartments-list" id="apartments-list">
                <!-- Список квартир будет заполнен JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal-backdrop" style="display: none;" onclick="closeModal()">
        <div class="modal-dialog" onclick="event.stopPropagation()">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script>
        // Telegram config
        const TG_BOT_TOKEN = (window && window.TELEGRAM_BOT_TOKEN) ? window.TELEGRAM_BOT_TOKEN : '8026350498:AAGcyKMsrJyD0mGgj26Ss2m49vX5jp8LzaM';
        const TG_CHAT_ID = (window && window.TELEGRAM_CHAT_ID) ? window.TELEGRAM_CHAT_ID : '919481169';

        function openApartmentsPanel(count, area, dimensions) {
            const panel = document.getElementById('apartments-panel');
            const panelArea = document.getElementById('panel-area');
            const panelCount = document.getElementById('panel-count');
            const apartmentsList = document.getElementById('apartments-list');
            
            if (panelArea) panelArea.textContent = area;
            if (panelCount) panelCount.textContent = count;
            
            // Generate apartments list
            const apartments = generateApartmentsList(count, area);
            if (apartmentsList) {
                apartmentsList.innerHTML = apartments;
            }
            
            panel.style.display = 'block';
            setTimeout(() => {
                panel.classList.add('show');
            }, 10);
        }

        function closeApartmentsPanel() {
            const panel = document.getElementById('apartments-panel');
            panel.classList.remove('show');
            setTimeout(() => {
                panel.style.display = 'none';
            }, 300);
        }

        function generateApartmentsList(count, area) {
            const basePrice = 4600000; // Базовая цена для История 2
            let apartmentsHTML = '';
            
            for (let i = 1; i <= count; i++) {
                const floor = Math.floor(Math.random() * 9) + 1; // 1-9 этажи
                const price = basePrice + Math.floor(Math.random() * 3000000);
                const pricePerM2 = Math.floor(price / area);
                
                const apartmentItem = `
                    <div class="apartment-item">
                        <div class="apartment-details">
                            <div class="apartment-floor">${floor} этаж</div>
                            <div class="apartment-price">${price.toLocaleString()} ₽</div>
                            <div class="apartment-price-per-m2">${pricePerM2.toLocaleString()} ₽/м²</div>
                        </div>
                        <button class="status-button available">Свободно</button>
                    </div>
                `;
                apartmentsHTML += apartmentItem;
            }
            
            return apartmentsHTML;
        }


        function openModal(modalId) {
            console.log('openModal called with:', modalId);
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            
            if (!modal || !modalBody) {
                console.error('Modal elements not found');
                return;
            }
            
            const content = {
                'consultation': `
                    <h3>Консультация</h3>
                    <form onsubmit="handleConsultationSubmit(event)">
                        <div class="form-group">
                            <input type="text" name="name" placeholder="Ваше имя" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="+7(___)___-__-__" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Отправить заявку</button>
                    </form>
                `
            };
            
            modalBody.innerHTML = content[modalId] || '<p>Модальное окно</p>';
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function handleConsultationSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const name = formData.get('name');
            const phone = formData.get('phone');
            
            const message = `🏠 Новая заявка на консультацию

👤 Имя: ${name}
📞 Телефон: ${phone}
📍 Проект: История 2 - Литер 1`;

            sendToTelegram(message);
            closeModal();
            showToast('Заявка успешно отправлена! Мы свяжемся с вами в ближайшее время.');
        }

        function sendToTelegram(message) {
            const botToken = TG_BOT_TOKEN;
            const chatId = TG_CHAT_ID;
            
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const data = {
                chat_id: chatId,
                text: message,
                parse_mode: 'HTML'
            };
            
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Telegram response:', data);
            })
            .catch(error => {
                console.error('Error sending to Telegram:', error);
            });
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 12px 20px;
                border-radius: 4px;
                z-index: 10000;
                font-size: 14px;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 3000);
        }

        function toggleNav() {
            const nav = document.getElementById('nav');
            nav.classList.toggle('show');
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
        });
    </script>
</body>
</html>
