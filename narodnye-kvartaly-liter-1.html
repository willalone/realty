<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—Ç–µ—Ä 1 - –ñ–ö –ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã - –°–ö –ù–í–ú</title>
    <meta name="description" content="–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä –≤ –õ–∏—Ç–µ—Ä–µ 1 –ñ–ö –ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã. –°—Ç—É–¥–∏–∏, 1-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ, 2-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ –∏ 3-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="narodnye-kvartaly">
    <!-- Header -->
    <header class="site-header">
        <div class="header-inner">
            <div class="logo">
                <span class="logo-text">–°–ö –ù–í–ú</span>
            </div>
            <button class="nav-toggle" onclick="toggleNav()" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                <span class="nav-toggle-bar"></span>
            </button>
            <nav class="nav" id="nav">
                <a href="index.html#projects" class="nav-link">–ü—Ä–æ–µ–∫—Ç—ã</a>
                <a href="index.html#mortgage" class="nav-link">–ò–ø–æ—Ç–µ–∫–∞</a>
                <a href="index.html#promos" class="nav-link">–ê–∫—Ü–∏–∏</a>
            </nav>
            <div class="header-actions">
                <a href="tel:+78612112850" class="phone">+7(988)470-78-93</a>
                <button class="btn btn-primary" onclick="openModal('consultation')">–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</button>
            </div>
        </div>
    </header>

    <!-- Floor Plans Hero -->
    <section class="floor-plans-hero">
        <div class="container">
            <div class="breadcrumbs">
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a> / <a href="index.html#projects">–ü—Ä–æ–µ–∫—Ç—ã</a> / <a href="narodnye-kvartaly.html">–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã</a> / <a href="narodnye-kvartaly-apartments.html">–õ–∏—Ç–µ—Ä—ã</a> / <span>–õ–∏—Ç–µ—Ä 1</span>
            </div>
            <h1>–õ–∏—Ç–µ—Ä 1</h1>
            <p class="hero-subtitle">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="container">
            <div class="filter-tabs">
                <button class="filter-tab" onclick="toggleFilterDropdown('type', this)">–¢–∏–ø <span class="dropdown-arrow">‚åÑ</span></button>
                <button class="filter-tab" onclick="toggleFilterDropdown('rooms', this)">–ö–æ–º–Ω–∞—Ç <span class="dropdown-arrow">‚åÑ</span></button>
                <button class="filter-tab" onclick="toggleFilterDropdown('price', this)">–¶–µ–Ω–∞ <span class="dropdown-arrow">‚åÑ</span></button>
                <button class="filter-tab" onclick="toggleFilterDropdown('area', this)">–ü–ª–æ—â–∞–¥—å <span class="dropdown-arrow">‚åÑ</span></button>
                <button class="clear-filters-btn" onclick="clearFilters()"><span class="clear-icon">√ó</span>–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <!-- Type Dropdown -->
            <div class="filter-dropdown" id="type-dropdown">
                <div class="dropdown-content">
                    <div class="filter-section-title">–ñ–∏–ª–æ–µ</div>
                    <div class="filter-options">
                        <label class="filter-option"><input type="radio" name="type" value="apartment" checked><span>–ö–≤–∞—Ä—Ç–∏—Ä–∞</span></label>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Rooms Dropdown -->
            <div class="filter-dropdown" id="rooms-dropdown">
                <div class="dropdown-content">
                    <div class="filter-options">
                        <label class="filter-option"><input type="checkbox" name="rooms" value="studio"><span>–°—Ç—É–¥–∏—è</span></label>
                        <label class="filter-option"><input type="checkbox" name="rooms" value="1"><span>1</span></label>
                        <label class="filter-option"><input type="checkbox" name="rooms" value="2"><span>2</span></label>
                        <label class="filter-option"><input type="checkbox" name="rooms" value="3"><span>3</span></label>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Price Dropdown -->
            <div class="filter-dropdown" id="price-dropdown">
                <div class="dropdown-content">
                    <div class="price-type-tabs">
                        <button class="price-tab active" onclick="selectPriceType('total')">–ó–∞ –ø–æ–º–µ—â–µ–Ω–∏–µ</button>
                        <button class="price-tab" onclick="selectPriceType('perM2')">–ó–∞ –º¬≤</button>
                    </div>
                    <div class="price-range">
                        <input type="number" id="priceFrom" placeholder="–û–¢" min="0" step="1000">
                        <input type="number" id="priceTo" placeholder="–î–û" min="0" step="1000">
                        <span class="price-unit">‚ÇΩ</span>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- Area Dropdown -->
            <div class="filter-dropdown" id="area-dropdown">
                <div class="dropdown-content">
                    <div class="area-type-tabs">
                        <button class="area-tab active" onclick="selectAreaType('total')">–û–±—â–∞—è</button>
                        <button class="area-tab" onclick="selectAreaType('living')">–ñ–∏–ª–∞—è</button>
                    </div>
                    <div class="area-range">
                        <input type="number" id="areaFrom" placeholder="–û–¢" min="0" step="0.1">
                        <input type="number" id="areaTo" placeholder="–î–û" min="0" step="0.1">
                        <span class="area-unit">M¬≤</span>
                    </div>
                    <button class="apply-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Floor Plans Section -->
    <section class="floor-plans-section">
        <div class="container">
            <div class="floor-plans-grid">
                <!-- 1-–∫–æ–º–Ω–∞—Ç–Ω–∞—è -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <span class="room-badge">1–∫</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/1–∫.png" alt="1-–∫–æ–º–Ω–∞—Ç–Ω–∞—è">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">34,2</span>
                                <span class="area-value">51,55</span>
                                <span class="area-value">67,38</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(3, 67.38, '67.38,73.2,85.1')">3 –ø–æ–º–µ—â–µ–Ω–∏—è</button>
                    </div>
                </div>

                <!-- 1-–∫–æ–º–Ω–∞—Ç–Ω–∞—è (2) -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <span class="room-badge">1–∫</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/1–∫.png" alt="1-–∫–æ–º–Ω–∞—Ç–Ω–∞—è">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">34,2</span>
                                <span class="area-value">51,55</span>
                                <span class="area-value">67,38</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(3, 67.38, '67.38,73.2,85.1')">3 –ø–æ–º–µ—â–µ–Ω–∏—è</button>
                    </div>
                </div>

                <!-- 2-–∫–æ–º–Ω–∞—Ç–Ω–∞—è -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <span class="room-badge">2–∫</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/2–∫.png" alt="2-–∫–æ–º–Ω–∞—Ç–Ω–∞—è">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">51,55</span>
                                <span class="area-value">67,38</span>
                                <span class="area-value">73,2</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(4, 51.55, '51.55,67.38,73.2')">4 –ø–æ–º–µ—â–µ–Ω–∏—è</button>
                    </div>
                </div>

                <!-- 3-–∫–æ–º–Ω–∞—Ç–Ω–∞—è -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <span class="room-badge">3–∫</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/3–∫.png" alt="3-–∫–æ–º–Ω–∞—Ç–Ω–∞—è">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">67,38</span>
                                <span class="area-value">73,2</span>
                                <span class="area-value">85,1</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(3, 67.38, '67.38,73.2,85.1')">3 –ø–æ–º–µ—â–µ–Ω–∏—è</button>
                    </div>
                </div>

                <!-- 3-–∫–æ–º–Ω–∞—Ç–Ω–∞—è (2) -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <span class="room-badge">3–∫</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/3–∫.png" alt="3-–∫–æ–º–Ω–∞—Ç–Ω–∞—è">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">67,38</span>
                                <span class="area-value">73,2</span>
                                <span class="area-value">85,1</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(3, 67.38, '67.38,73.2,85.1')">3 –ø–æ–º–µ—â–µ–Ω–∏—è</button>
                    </div>
                </div>

                <!-- 3-–∫–æ–º–Ω–∞—Ç–Ω–∞—è (3) -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ù–∞—Ä–æ–¥–Ω–∞—è</p>
                        <span class="room-badge">3–∫</span>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/3–∫.png" alt="3-–∫–æ–º–Ω–∞—Ç–Ω–∞—è">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">67,38</span>
                                <span class="area-value">73,2</span>
                                <span class="area-value">85,1</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–¶–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(3, 67.38, '67.38,73.2,85.1')">3 –ø–æ–º–µ—â–µ–Ω–∏—è</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Apartments Detail Panel -->
    <div id="apartments-panel" class="apartments-panel" style="display: none;" onclick="closeApartmentsPanel()">
        <div class="panel-content" onclick="event.stopPropagation()">
            <div class="panel-header">
                <div class="panel-title">
                    <h3>–ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã</h3>
                    <p>–õ–∏—Ç–µ—Ä 1 - II –∫–≤. 2027</p>
                </div>
                <button class="panel-close" onclick="closeApartmentsPanel()">&times;</button>
            </div>
            <div class="panel-floor-plan">
                <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/–Ω–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã/1–∫.png" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞">
            </div>
            <div class="panel-summary">
                <p class="room-info">–ü–æ–º–µ—â–µ–Ω–∏–µ: <span id="panel-area">34.2</span> –º¬≤</p>
                <p class="found-info">–ù–∞–π–¥–µ–Ω–æ: <span id="panel-count">2</span> –ø–æ–º–µ—â–µ–Ω–∏–π</p>
            </div>
            <div class="apartments-list" id="apartments-list">
                <!-- –°–ø–∏—Å–æ–∫ –∫–≤–∞—Ä—Ç–∏—Ä –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal-backdrop" style="display: none;" onclick="closeModal()">
        <div class="modal-dialog" onclick="event.stopPropagation()">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script>
        // Filter like on "–õ–∏—Ç–µ—Ä—ã" page
        let allCards = [];
        let currentPriceType = 'total';
        let currentAreaType = 'total';

        function mapRoomsBadgeToValue(text) {
            const t = (text || '').toLowerCase();
            if (t.includes('—Å—Ç—É–¥')) return 'studio';
            if (t.includes('1–∫') || t === '1') return '1';
            if (t.includes('2–∫') || t === '2') return '2';
            if (t.includes('3–∫') || t === '3') return '3';
            return '';
        }

        function hydrateCardDatasets() {
            document.querySelectorAll('.floor-plan-card').forEach(card => {
                // type
                card.dataset.type = 'apartment';
                // rooms by badge text
                const badge = card.querySelector('.room-badge');
                card.dataset.rooms = mapRoomsBadgeToValue(badge ? badge.textContent.trim() : '');
                // price and area unknown on lit pages
                card.dataset.priceTotal = '0';
                card.dataset.pricePerM2 = '0';
                card.dataset.areaTotal = '0';
                card.dataset.areaLiving = '0';
            });
        }

        function initFilter() {
            hydrateCardDatasets();
            allCards = Array.from(document.querySelectorAll('.floor-plan-card'));
            document.querySelectorAll('.filter-dropdown').forEach(d => d.style.display = 'none');
            addFilterEventListeners();
        }

        function addFilterEventListeners() {
            document.querySelectorAll('input[name="type"]').forEach(r => r.addEventListener('change', updateFilterResults));
            document.querySelectorAll('input[name="rooms"]').forEach(cb => cb.addEventListener('change', updateFilterResults));
            const ids = ['priceFrom','priceTo','areaFrom','areaTo'];
            ids.forEach(id => { const el = document.getElementById(id); if (el) el.addEventListener('input', updateFilterResults); });
            document.addEventListener('click', function(e){ const fs = document.querySelector('.filter-section'); if (fs && !fs.contains(e.target)) closeAllDropdowns(); });
        }

        function toggleFilterDropdown(filterType, button) {
            const dropdown = document.getElementById(filterType + '-dropdown');
            const arrow = button.querySelector('.dropdown-arrow');
            document.querySelectorAll('.filter-dropdown').forEach(d => { if (d !== dropdown) d.style.display = 'none'; });
            document.querySelectorAll('.dropdown-arrow').forEach(a => a.textContent = '‚åÑ');
            if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                dropdown.style.display = 'block';
                const rb = button.getBoundingClientRect();
                const sec = document.querySelector('.filter-section').getBoundingClientRect();
                dropdown.style.position = 'absolute';
                dropdown.style.left = (rb.left - sec.left) + 'px';
                dropdown.style.top = (rb.bottom - sec.top + 4) + 'px';
                arrow.textContent = '‚åÉ';
            } else {
                dropdown.style.display = 'none';
                arrow.textContent = '‚åÑ';
            }
        }

        function closeAllDropdowns() {
            document.querySelectorAll('.filter-dropdown').forEach(d => d.style.display = 'none');
            document.querySelectorAll('.dropdown-arrow').forEach(a => a.textContent = '‚åÑ');
        }

        function selectPriceType(type) { currentPriceType = type; document.querySelectorAll('.price-tab').forEach(t=>t.classList.remove('active')); event.target.classList.add('active'); updateFilterResults(); }
        function selectAreaType(type) { currentAreaType = type; document.querySelectorAll('.area-tab').forEach(t=>t.classList.remove('active')); event.target.classList.add('active'); updateFilterResults(); }
        function applyFilters(){ updateFilterResults(); closeAllDropdowns(); }
        function clearFilters(){ const def=document.querySelector('input[name="type"][value="apartment"]'); if(def) def.checked=true; document.querySelectorAll('input[name="rooms"]').forEach(cb=>cb.checked=false); currentPriceType='total'; document.querySelectorAll('.price-tab').forEach(t=>t.classList.remove('active')); const pt=document.querySelector('.price-tab'); if(pt) pt.classList.add('active'); currentAreaType='total'; document.querySelectorAll('.area-tab').forEach(t=>t.classList.remove('active')); const at=document.querySelector('.area-tab'); if(at) at.classList.add('active'); ['priceFrom','priceTo','areaFrom','areaTo'].forEach(id=>{ const el=document.getElementById(id); if(el) el.value='';}); allCards.forEach(c=>c.style.display='block'); }

        function updateFilterResults(){
            const selectedType = document.querySelector('input[name="type"]:checked')?.value || 'apartment';
            const selectedRooms = Array.from(document.querySelectorAll('input[name="rooms"]:checked')).map(cb=>cb.value);
            const priceFromEl=document.getElementById('priceFrom'); const priceToEl=document.getElementById('priceTo'); const areaFromEl=document.getElementById('areaFrom'); const areaToEl=document.getElementById('areaTo');
            const priceFilterActive=!!(priceFromEl?.value||priceToEl?.value); const areaFilterActive=!!(areaFromEl?.value||areaToEl?.value);
            const filtered = allCards.filter(card => {
                if (card.dataset.type !== selectedType) return false;
                if (selectedRooms.length > 0 && !selectedRooms.includes(card.dataset.rooms)) return false;
                // On liter pages, price/area values are unknown; hide when user sets these
                if (priceFilterActive || areaFilterActive) return false;
                return true;
            });
            allCards.forEach(c=>c.style.display='none');
            filtered.forEach(c=>c.style.display='block');
        }
        // Telegram config
        const TG_BOT_TOKEN = (window && window.TELEGRAM_BOT_TOKEN) ? window.TELEGRAM_BOT_TOKEN : 'YOUR_BOT_TOKEN_HERE';
        const TG_CHAT_ID = (window && window.TELEGRAM_CHAT_ID) ? window.TELEGRAM_CHAT_ID : '919481169';

        function openApartmentsPanel(count, area, dimensions) {
            const panel = document.getElementById('apartments-panel');
            const panelArea = document.getElementById('panel-area');
            const panelCount = document.getElementById('panel-count');
            const apartmentsList = document.getElementById('apartments-list');
            
            if (panelArea) panelArea.textContent = area;
            if (panelCount) panelCount.textContent = count;
            
            // Generate apartments list
            const apartments = generateApartmentsList(count, area);
            if (apartmentsList) {
                apartmentsList.innerHTML = apartments;
            }
            
            panel.style.display = 'block';
            setTimeout(() => {
                panel.classList.add('show');
            }, 10);
        }

        function closeApartmentsPanel() {
            const panel = document.getElementById('apartments-panel');
            panel.classList.remove('show');
            setTimeout(() => {
                panel.style.display = 'none';
            }, 300);
        }

        function generateApartmentsList(count, area) {
            let apartmentsHTML = '';
            for (let i = 1; i <= count; i++) {
                const floor = Math.floor(Math.random() * 9) + 1; // 1-9 —ç—Ç–∞–∂–∏
                const apartmentItem = `
                    <div class="apartment-item">
                        <div class="apartment-details">
                            <div class="apartment-floor">${floor} —ç—Ç–∞–∂</div>
                            <div class="apartment-price">–¶–µ–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É</div>
                            <div class="apartment-price-per-m2">‚Äî</div>
                        </div>
                        <button class="status-button available">–°–≤–æ–±–æ–¥–Ω–æ</button>
                    </div>
                `;
                apartmentsHTML += apartmentItem;
            }
            return apartmentsHTML;
        }


        function openModal(modalId) {
            console.log('openModal called with:', modalId);
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            
            if (!modal || !modalBody) {
                console.error('Modal elements not found');
                return;
            }
            
            const content = {
                'consultation': `
                    <h3>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h3>
                    <form onsubmit="handleConsultationSubmit(event)">
                        <div class="form-group">
                            <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="+7(___)___-__-__" required>
                        <div class="form-checkbox">
                            <input type="checkbox" id="privacy-modal" required>
                            <label for="privacy-modal">–Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞</label>
                        </div>
                        <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                    </form>
                `
            };
            
            modalBody.innerHTML = content[modalId] || '<p>–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ</p>';
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function handleConsultationSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const name = formData.get('name');
            const phone = formData.get('phone');
            
            const message = `üè† –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é

üë§ –ò–º—è: ${name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}
üìç –ü—Ä–æ–µ–∫—Ç: –ù–∞—Ä–æ–¥–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã - –õ–∏—Ç–µ—Ä 1`;

            sendToTelegram(message);
            closeModal();
            showToast('–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.', 'success');
        }

        function sendToTelegram(message) {
            const botToken = TG_BOT_TOKEN;
            const chatId = TG_CHAT_ID;
            
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const data = {
                chat_id: chatId,
                text: message,
                parse_mode: 'HTML'
            };
            
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Telegram response:', data);
            })
            .catch(error => {
                console.error('Error sending to Telegram:', error);
            });
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 12px 20px;
                border-radius: 4px;
                z-index: 10000;
                font-size: 14px;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 3000);
        }

        function toggleNav() {
            const nav = document.getElementById('nav');
            nav.classList.toggle('show');
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initFilter();
        });
    </script>
</body>
</html>
