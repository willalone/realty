<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä - –õ–∏—Ç–µ—Ä 1.8 - –ñ–ö –î–û–ú 101 - –°–ö –ù–í–ú</title>
    <meta name="description" content="–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä –≤ –õ–∏—Ç–µ—Ä–µ 1.8 –ñ–ö –î–û–ú 101. –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∏ –æ—Ç 36 –º¬≤. –¶–µ–Ω—ã –æ—Ç 4,2 –º–ª–Ω ‚ÇΩ." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dom-101-floor-plans">
    <!-- Header -->
    <header class="site-header">
        <div class="header-inner">
            <div class="logo">
                <span class="logo-text">–°–ö –ù–í–ú</span>
            </div>
            <button class="nav-toggle" onclick="toggleNav()" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                <span class="nav-toggle-bar"></span>
            </button>
            <nav class="nav" id="nav">
                <a href="index.html#projects" class="nav-link">–ü—Ä–æ–µ–∫—Ç—ã</a>
                <a href="index.html#mortgage" class="nav-link">–ò–ø–æ—Ç–µ–∫–∞</a>
                <a href="index.html#promos" class="nav-link">–ê–∫—Ü–∏–∏</a>
            </nav>
            <div class="header-actions">
                <a href="tel:+78612112850" class="phone">+7(988)470-78-93</a>
                <button class="btn btn-primary" onclick="openModal('consultation')">–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</button>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="floor-plans-hero">
        <div class="container">
            <div class="breadcrumbs">
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a> / <a href="index.html#projects">–ü—Ä–æ–µ–∫—Ç—ã</a> / <a href="dom-101.html">–î–û–ú 101</a> / <a href="dom-101-apartments.html">–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä</a> / <span>–õ–∏—Ç–µ—Ä 1.8</span>
            </div>
            <h1>–õ–∏—Ç–µ—Ä 1.8</h1>
            <p class="hero-subtitle">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –î–æ—Ä–æ–∂–Ω–∞—è, 1.8</p>
        </div>
    </section>

    <!-- Floor Plans Grid -->
    <section class="floor-plans-section">
        <div class="container">
            <div class="floor-plans-grid">
                <!-- –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 1 -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1.8</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –î–æ—Ä–æ–∂–Ω–∞—è, 1.8</p>
                        <div class="room-badge">1–∫</div>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/1–∫.png" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 1–∫">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">12.10</span>
                                <span class="area-value">36.80</span>
                                <span class="area-value">38.20</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–æ—Ç 4 200 000 ‚ÇΩ</span>
                            <span class="total-area">38.2 –º¬≤</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(6, 38.2, '12.10,36.80,38.20')">6 –ø–æ–º–µ—â–µ–Ω–∏–π</button>
                    </div>
                </div>

                <!-- –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 2 -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1.8</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –î–æ—Ä–æ–∂–Ω–∞—è, 1.8</p>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/1–∫.png" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 1–∫">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">13.60</span>
                                <span class="area-value">39.40</span>
                                <span class="area-value">41.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–æ—Ç 4 500 000 ‚ÇΩ</span>
                            <span class="total-area">41.0 –º¬≤</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(7, 41.0, '13.60,39.40,41.00')">7 –ø–æ–º–µ—â–µ–Ω–∏–π</button>
                    </div>
                </div>

                <!-- –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 3 -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1.8</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –î–æ—Ä–æ–∂–Ω–∞—è, 1.8</p>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/1–∫.png" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 1–∫">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">15.20</span>
                                <span class="area-value">42.80</span>
                                <span class="area-value">44.50</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–æ—Ç 4 900 000 ‚ÇΩ</span>
                            <span class="total-area">44.5 –º¬≤</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(8, 44.5, '15.20,42.80,44.50')">8 –ø–æ–º–µ—â–µ–Ω–∏–π</button>
                    </div>
                </div>

                <!-- –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 4 -->
                <div class="floor-plan-card">
                    <div class="floor-plan-header">
                        <h3>–õ–∏—Ç–µ—Ä 1.8</h3>
                        <p class="location">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –î–æ—Ä–æ–∂–Ω–∞—è, 1.8</p>
                        <div class="room-badge">1–∫</div>
                    </div>
                    <div class="floor-plan-image">
                        <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/1–∫.png" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 1–∫">
                        <div class="area-details">
                            <div class="area-box">
                                <span class="area-value">16.80</span>
                                <span class="area-value">46.20</span>
                                <span class="area-value">48.10</span>
                            </div>
                        </div>
                    </div>
                    <div class="floor-plan-info">
                        <div class="price-area">
                            <span class="price">–æ—Ç 5 400 000 ‚ÇΩ</span>
                            <span class="total-area">48.1 –º¬≤</span>
                        </div>
                        <button class="rooms-button" onclick="openApartmentsPanel(9, 48.1, '16.80,46.20,48.10')">9 –ø–æ–º–µ—â–µ–Ω–∏–π</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Apartments Detail Panel -->
    <div id="apartments-panel" class="apartments-panel" style="display: none;" onclick="closeApartmentsPanel()">
        <div class="panel-content" onclick="event.stopPropagation()">
            <div class="panel-header">
                <div class="panel-title">
                    <h3>–î–æ–º 101</h3>
                    <p>–õ–∏—Ç–µ—Ä 1.8 - I –∫–≤. 2030</p>
                </div>
                <button class="panel-close" onclick="closeApartmentsPanel()">&times;</button>
            </div>
            <div class="panel-floor-plan">
                <img src="src/img/–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫/1–∫.png" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞">
            </div>
            
            <div class="panel-summary">
                <p class="room-info">–ü–æ–º–µ—â–µ–Ω–∏–µ: 1 –∫–æ–º–Ω–∞—Ç–Ω–∞—è, <span id="panel-area">41.0</span> –º¬≤</p>
                <p class="found-info">–ù–∞–π–¥–µ–Ω–æ: <span id="panel-count">7</span> –ø–æ–º–µ—â–µ–Ω–∏–π</p>
            </div>
            
            <div class="apartments-list" id="apartments-list">
                <!-- –°–ø–∏—Å–æ–∫ –∫–≤–∞—Ä—Ç–∏—Ä –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal-backdrop" style="display: none;" onclick="closeModal()">
        <div class="modal-dialog" onclick="event.stopPropagation()">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script>
        // Telegram config
        const TG_BOT_TOKEN = (window && window.TELEGRAM_BOT_TOKEN) ? window.TELEGRAM_BOT_TOKEN : '8026350498:AAGcyKMsrJyD0mGgj26Ss2m49vX5jp8LzaM';
        const TG_CHAT_ID = (window && window.TELEGRAM_CHAT_ID) ? window.TELEGRAM_CHAT_ID : '919481169';

        function openModal(modalId) {
            console.log('openModal called with:', modalId);
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            
            if (!modal || !modalBody) {
                console.error('Modal elements not found');
                return;
            }
            
            const content = {
                'consultation': `
                    <h3>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h3>
                    <form onsubmit="handleConsultationSubmit(event)">
                        <div class="form-group">
                            <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="+7(___)___-__-__" required>
                        <div class="form-checkbox">
                            <input type="checkbox" id="privacy-modal" required>
                            <label for="privacy-modal">–Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞</label>
                        </div>                        </div>
                        <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                    </form>
                `
            };
            
            modalBody.innerHTML = content[modalId] || '<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</p>';
            modal.style.display = 'flex';
            console.log('Modal opened successfully');
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function sendToTelegram(data) {
            const botToken = TG_BOT_TOKEN;
            const chatId = TG_CHAT_ID;
            
            const message = `üìû –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é

üë§ –ò–º—è: ${data.name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${data.phone}
üìã –¢–∏–ø –∑–∞—è–≤–∫–∏: ${data.formType}`;

            console.log('Sending consultation to Telegram:', { botToken: botToken ? botToken.substring(0, 10) + '...' : '(empty)', chatId, message });

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000);

            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message,
                    parse_mode: 'HTML'
                }),
                signal: controller.signal
            })
            .then(response => {
                clearTimeout(timeoutId);
                console.log('Telegram response status:', response.status);
                return response.json();
            })
            .then(data => {
                console.log('Telegram response data:', data);
                
                if (data.ok) {
                    showToast('–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.', 'success');
                    closeModal();
                } else {
                    console.error('Telegram API error:', data);
                    showToast(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏: ${data.description || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`, 'error');
                }
            })
            .catch(error => {
                clearTimeout(timeoutId);
                console.error('Network error:', error);
                
                if (error.name === 'AbortError') {
                    showToast('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
                } else {
                    showToast('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
                }
            });
        }

        function handleConsultationSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {
                name: formData.get('name'),
                phone: formData.get('phone'),
                formType: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è'
            };

            if (!data.name || !data.phone) {
                showToast('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω', 'error');
                return;
            }

            // Validate name - only letters, minimum 2 characters
            const nameRegex = /^[a-zA-Z–∞-—è–ê-–Ø—ë–Å\s\-']+$/;
            if (!nameRegex.test(data.name.trim())) {
                showToast('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã', 'error');
                return;
            }

            if (data.name.trim().length < 2) {
                showToast('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞', 'error');
                return;
            }
            const phoneDigits = data.phone.replace(/\D/g, '');
            const phoneRegex = /^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/;
            
            if (phoneDigits.length !== 11) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (11 —Ü–∏—Ñ—Ä) –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7(999)999-99-99', 'error');
                return;
            }
            
            if (!phoneRegex.test(data.phone)) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7(999)999-99-99', 'error');
                return;
            }

            sendToTelegram(data);
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<div class="toast-content">${message}</div><button class="toast-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>`;
            document.body.appendChild(toast);
            
            const removeToast = () => {
                if (toast && toast.parentNode) toast.parentNode.removeChild(toast);
            };
            
            toast.querySelector('.toast-close')?.addEventListener('click', removeToast);
            
            setTimeout(removeToast, 4000);
        }

        function toggleNav() {
            const nav = document.getElementById('nav');
            nav.classList.toggle('show');
        }


        function openApartmentsPanel(count, area, dimensions) {
            const panel = document.getElementById('apartments-panel');
            const panelArea = document.getElementById('panel-area');
            const panelCount = document.getElementById('panel-count');
            const apartmentsList = document.getElementById('apartments-list');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            panelArea.textContent = area;
            panelCount.textContent = count;
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –∫–≤–∞—Ä—Ç–∏—Ä
            apartmentsList.innerHTML = '';
            
            const apartments = generateApartmentsList(count, area);
            apartments.forEach(apartment => {
                const apartmentItem = document.createElement('div');
                apartmentItem.className = 'apartment-item';
                apartmentItem.innerHTML = `
                    <div class="apartment-details">
                        <div class="apartment-price">${apartment.price} ‚ÇΩ</div>
                        <div class="apartment-price-per-m2">${apartment.pricePerM2} ‚ÇΩ/–º¬≤</div>
                        <button class="status-button available">–°–≤–æ–±–æ–¥–Ω–æ</button>
                    </div>
                    <div class="apartment-floor">${apartment.floor} —ç—Ç–∞–∂</div>
                `;
                apartmentsList.appendChild(apartmentItem);
            });
            
            panel.style.display = 'block';
            setTimeout(() => {
                panel.classList.add('show');
            }, 10);
        }

        function closeApartmentsPanel() {
            const panel = document.getElementById('apartments-panel');
            panel.classList.remove('show');
            setTimeout(() => {
                panel.style.display = 'none';
            }, 300);
        }

        function generateApartmentsList(count, area) {
            const apartments = [];
            const basePrice = Math.floor(4200000 + (area - 30) * 50000);
            const pricePerM2 = Math.floor(basePrice / area);
            
            for (let i = 0; i < count; i++) {
                const floor = 9 - i; // –ù–∞—á–∏–Ω–∞–µ–º —Å 9 —ç—Ç–∞–∂–∞
                const priceVariation = Math.floor(Math.random() * 200000) - 100000;
                const price = basePrice + priceVariation;
                
                apartments.push({
                    floor: floor,
                    price: price.toLocaleString('ru-RU'),
                    pricePerM2: Math.floor(price / area).toLocaleString('ru-RU')
                });
            }
            
            return apartments;
        }
    </script>
</body>
</html>
